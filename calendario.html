<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calendario - ParkApp</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; background: #e2e8f0; padding: 8px; border-radius: 12px; }
        .calendar-day { background: white; aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 8px; position: relative; font-weight: 600; cursor: pointer; }
        .calendar-day.header { background: none; font-weight: 800; font-size: 0.7rem; color: #64748b; height: auto; aspect-ratio: auto; padding: 5px 0; cursor: default; }
        .calendar-day.has-events::after { content: ''; position: absolute; bottom: 6px; width: 6px; height: 6px; background: var(--primary); border-radius: 50%; }
        .calendar-day.selected { background: var(--primary); color: white; }
        .calendar-day.selected::after { background: white; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 15px; }
        .stat-box { background: white; padding: 12px; border-radius: 12px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .stat-box small { display: block; font-size: 0.65rem; color: #64748b; font-weight: 800; text-transform: uppercase; }
        .stat-box strong { font-size: 1.2rem; color: var(--primary); }
        #loading-overlay { display: none; text-align: center; padding: 10px; font-weight: 600; color: var(--primary); }
    </style>
</head>
<body class="bg-app">
    <div class="app-container">
        <header class="app-header">
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                <button onclick="window.location.href='menu.html'" class="btn-scheda" style="height: 40px; width: 40px; display: flex; align-items: center; justify-content: center; border:none; background:white; border-radius:8px;">
                    <span class="material-symbols-rounded">arrow_back</span>
                </button>
                <h1 style="font-size: 1.25rem; font-weight: 800; margin: 0;">Il mio Calendario</h1>
            </div>
            <div style="display: flex; gap: 10px;">
                <select id="select-mese" class="search-input" style="flex: 2; font-weight: 600;"></select>
                <select id="select-anno" class="search-input" style="flex: 1; font-weight: 600;"></select>
            </div>
        </header>

        <main style="padding: 1rem;">
            <div id="loading-overlay">Caricamento dati...</div>
            
            <div class="section-card" style="padding: 5px;">
                <div id="calendar-container" class="calendar-grid"></div>
            </div>

            <div id="day-detail" style="display: none; margin-top: 20px;">
                <h3 id="selected-date-title" style="font-weight: 800; color: var(--primary); margin: 0 0 10px 5px;"></h3>
                
                <div class="stats-grid">
                    <div class="stat-box"><small>Ore Ord.</small><strong id="sum-ord">0</strong></div>
                    <div class="stat-box"><small>Ore Stra.</small><strong id="sum-stra">0</strong></div>
                    <div class="stat-box"><small>Viaggio</small><strong id="sum-viag">0</strong></div>
                </div>

                <div id="events-list" style="margin-top: 15px; display: flex; flex-direction: column; gap: 12px;"></div>
            </div>
        </main>

        <footer class="app-footer">
            <span class="footer-text">EDIT BY KINGFREAK Version 1.0</span>
        </footer>
    </div>
    <script src="calendario.js"></script>
</body>
</html>