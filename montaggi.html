<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ParkApp - Montaggi</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body class="bg-app">
    <div class="app-container">
        <!-- HEADER -->
        <header class="app-header">
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                <!-- Pulsante Indietro -->
                <button onclick="window.location.href='menu.html'" class="btn-scheda" style="height: 40px; width: 40px; display: flex; align-items: center; justify-content: center; border: none; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <span class="material-symbols-rounded" style="color: var(--primary);">arrow_back</span>
                </button>
                
                <!-- Titolo e tecnico -->
                <div style="flex-grow: 1;">
                    <h1 style="font-size: 1.25rem; font-weight: 800; color: var(--primary); margin: 0;">Lista Montaggi</h1>
                    <p id="tecnico-display" style="margin: 0; font-size: 0.85rem; color: var(--text-muted); font-weight: 600;"></p>
                </div>
                
                <!-- Icona utente -->
                <span class="material-symbols-rounded" style="color: var(--text-muted);">account_circle</span>
            </div>
            
            <!-- Ricerca principale -->
            <div class="search-wrapper">
                <span class="material-symbols-rounded" style="position: absolute; left: 12px; top: 10px; color: var(--text-muted); font-size: 20px;">search</span>
                <input type="text" id="searchMain" placeholder="Cerca per impianto o indirizzo..." class="search-input">
            </div>

            <!-- FILTRI PER STATO -->
            <div id="filtriStato" style="margin-top: 15px; display: flex; flex-wrap: wrap; gap: 8px;">
                <button class="filtro-stato" data-stato="tutti">Tutti</button>
                <button class="filtro-stato" data-stato="1">Chiusi</button>
                <button class="filtro-stato" data-stato="2">In Lavorazione</button>
                <button class="filtro-stato" data-stato="3">In Programmazione</button>
                <button class="filtro-stato" data-stato="0">Sconosciuto</button>
            </div>
        </header>

        <!-- CONTENUTO PRINCIPALE -->
        <main style="padding: 1rem;">
            <div id="listaMontaggi">
                <div style="text-align: center; padding: 2rem; color: var(--text-muted);">Caricamento montaggi...</div>
            </div>
        </main>

        <!-- FOOTER -->
        <footer class="app-footer">
            <span class="footer-text">EDIT BY KINGFREAK Version 1.0</span>
        </footer>
    </div>

    <!-- SCRIPT -->
    <script src="montaggi.js"></script>

    <script>
        // Script per visualizzare il tecnico selezionato nel login
        document.addEventListener('DOMContentLoaded', () => {
            const nomeSalvato = localStorage.getItem('tecnico_loggato');
            const display = document.getElementById('tecnico-display');
            if (nomeSalvato && display) {
                display.innerText = "Tecnico: " + nomeSalvato;
            } else if (display) {
                display.innerText = "Nessun tecnico selezionato";
            }
        });
    </script>
</body>
</html>